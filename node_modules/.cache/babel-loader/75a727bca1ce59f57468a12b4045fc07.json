{"ast":null,"code":"var _jsxFileName = \"/Users/jeromekithinji/Development/_nsight/src/pages/enrollment/enrollment.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport './enrollment.scss';\nimport enrollmentData from \"../../assets/data/enrollment-data\";\nimport Filter from \"../../components/filter/filter\";\nimport EnrollmentList from \"../../components/enrollmentList/enrollmentList\";\nimport TopHeader from '../../components/topheader/topheader';\nimport Searchbox from '../../components/searchbox/searchbox';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Enrollment = () => {\n  _s();\n\n  const [enrollments, setEnrollments] = useState([]);\n  const [enrollmentsCopy, setEnrollmentsCopy] = useState([]);\n  const [showResults, setShowResults] = useState(false);\n\n  const handleSearch = e => {\n    const sanitiseInput = e.target.value.toLowerCase();\n    const studentSearch = enrollmentData.filter(intake => {\n      const sanitisedStudentFirstName = intake.students.first_name.toLowerCase();\n      const sanitisedStudentLastName = intake.students.last_name.toLowerCase();\n      const sanitisedStudentName = `${sanitisedStudentFirstName} ${sanitisedStudentLastName}`;\n      return sanitisedStudentName.includes(sanitiseInput);\n    });\n    setEnrollmentsCopy(studentSearch); // const toShow = studentSearch.slice(pageStart, pageEnd);\n\n    setStudents(studentSearch);\n    setShowResults(true);\n\n    if (e.target.value.length === 0) {\n      setShowResults(false); // const toShow = studentsData.slice(pageStart, pageEnd);\n\n      setStudents(enrollmentData);\n      setStudentsCopy(enrollmentData);\n    }\n  };\n\n  const courseNames = enrollmentData.map(courses => courses.intakeName);\n\n  const createStatefulObject = courseNames => {\n    return courseNames.reduce((statefulObject, courseName) => {\n      statefulObject[courseName] = false;\n      return statefulObject;\n    }, {});\n  };\n\n  const [courses, setCourses] = useState(createStatefulObject(courseNames));\n\n  const handleSetCourses = courseName => {\n    const tempCourses = { ...courses\n    };\n    tempCourses[courseName] = !tempCourses[courseName];\n    setCourses(tempCourses); // not synchronous\n\n    return tempCourses;\n  };\n\n  const filterByCourseName = e => {\n    const courses = handleSetCourses(e.target.value);\n    const stateArray = Object.keys(courses).filter(key => courses[key]);\n    const filteredCourseName = enrollmentData.filter(intake => stateArray.includes(intake.intakeName));\n\n    if (filteredCourseName.length === 0) {\n      getEnrollments(enrollmentData);\n    } else {\n      setEnrollmentsCopy(filteredCourseName);\n      setEnrollments(filteredCourseName);\n    }\n\n    const filteredStateArray = stateArray.filter(courseName => courseName.includes(true));\n\n    if (filteredStateArray) {\n      setShowResults(true);\n    } else {\n      setShowResults(false);\n    }\n  };\n\n  const getEnrollments = () => {\n    setEnrollments(enrollmentData);\n    setEnrollmentsCopy(enrollmentData);\n  };\n\n  useEffect(() => {\n    getEnrollments();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"enrollment-container\",\n    children: [/*#__PURE__*/_jsxDEV(TopHeader, {\n      title: \"Enrollments\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Searchbox, {\n      handleSearch: handleSearch\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Filter, {\n      courses: courses,\n      filterByCourseName: filterByCourseName\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"enrollment-list\",\n      children: /*#__PURE__*/_jsxDEV(EnrollmentList, {\n        enrollmentData: enrollments\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Enrollment, \"SSnd3/pl0uftECh34XXlPKk3De8=\");\n\n_c = Enrollment;\nexport default Enrollment;\n\nvar _c;\n\n$RefreshReg$(_c, \"Enrollment\");","map":{"version":3,"sources":["/Users/jeromekithinji/Development/_nsight/src/pages/enrollment/enrollment.jsx"],"names":["React","useEffect","useState","enrollmentData","Filter","EnrollmentList","TopHeader","Searchbox","Enrollment","enrollments","setEnrollments","enrollmentsCopy","setEnrollmentsCopy","showResults","setShowResults","handleSearch","e","sanitiseInput","target","value","toLowerCase","studentSearch","filter","intake","sanitisedStudentFirstName","students","first_name","sanitisedStudentLastName","last_name","sanitisedStudentName","includes","setStudents","length","setStudentsCopy","courseNames","map","courses","intakeName","createStatefulObject","reduce","statefulObject","courseName","setCourses","handleSetCourses","tempCourses","filterByCourseName","stateArray","Object","keys","key","filteredCourseName","getEnrollments","filteredStateArray"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport './enrollment.scss'\nimport enrollmentData from \"../../assets/data/enrollment-data\";\nimport Filter from \"../../components/filter/filter\"\nimport EnrollmentList from \"../../components/enrollmentList/enrollmentList\"\nimport TopHeader from '../../components/topheader/topheader';\nimport Searchbox from '../../components/searchbox/searchbox';\n\nconst Enrollment = () => {\n\n    const [enrollments, setEnrollments] = useState([]);\n    const [enrollmentsCopy, setEnrollmentsCopy] = useState([]);\n    const [showResults, setShowResults] = useState(false);\n\n    const handleSearch = (e) => {\n        const sanitiseInput = e.target.value.toLowerCase();\n        const studentSearch = enrollmentData.filter((intake) => {\n            const sanitisedStudentFirstName = intake.students.first_name.toLowerCase();\n            const sanitisedStudentLastName = intake.students.last_name.toLowerCase();\n            const sanitisedStudentName = `${sanitisedStudentFirstName} ${sanitisedStudentLastName}`;\n            return sanitisedStudentName.includes(sanitiseInput);\n        });\n        setEnrollmentsCopy(studentSearch);\n        // const toShow = studentSearch.slice(pageStart, pageEnd);\n        setStudents(studentSearch);\n\n        setShowResults(true);\n        if (e.target.value.length === 0) {\n            setShowResults(false);\n            // const toShow = studentsData.slice(pageStart, pageEnd);\n            setStudents(enrollmentData);\n            setStudentsCopy(enrollmentData);\n        }\n    };\n\n    const courseNames = enrollmentData.map((courses) => courses.intakeName);\n\n    const createStatefulObject = (courseNames) => {\n        return courseNames.reduce((statefulObject, courseName) => {\n            statefulObject[courseName] = false;\n            return statefulObject;\n        }, {});\n    };\n\n    const [courses, setCourses] = useState(\n        createStatefulObject(courseNames)\n    );\n\n    const handleSetCourses = (courseName) => {\n        const tempCourses = { ...courses };\n        tempCourses[courseName] = !tempCourses[courseName];\n\n        setCourses(tempCourses); // not synchronous\n        return tempCourses;\n    };\n\n    const filterByCourseName = (e) => {\n        const courses = handleSetCourses(e.target.value);\n        const stateArray = Object.keys(courses).filter((key) => courses[key]);\n\n        const filteredCourseName = enrollmentData.filter((intake) =>\n            stateArray.includes(intake.intakeName)\n        );\n\n        if (filteredCourseName.length === 0) {\n            getEnrollments(enrollmentData);\n        } else {\n            setEnrollmentsCopy(filteredCourseName);\n            setEnrollments(filteredCourseName);\n        }\n\n        const filteredStateArray = stateArray.filter((courseName) =>\n            courseName.includes(true)\n        );\n\n        if (filteredStateArray) {\n            setShowResults(true);\n        } else {\n            setShowResults(false);\n        }\n    };\n\n    const getEnrollments = () => {\n        setEnrollments(enrollmentData);\n        setEnrollmentsCopy(enrollmentData);\n    }\n\n    useEffect(() => {\n        getEnrollments();\n    }, []);\n\n    return (\n        <div className=\"enrollment-container\">\n            <TopHeader title=\"Enrollments\"/>\n            <Searchbox handleSearch={handleSearch} />\n            <Filter courses={courses} filterByCourseName={filterByCourseName} />\n            <div className=\"enrollment-list\">\n                <EnrollmentList enrollmentData={enrollments} />\n            </div>\n        </div>\n    )\n}\n\nexport default Enrollment\n"]},"metadata":{},"sourceType":"module"}